(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{195:function(e,t,n){"use strict";n.r(t);var i={methods:{appendRootMenu:function(){this.dialogVisible=!0,this.menu=this.origin_menu,this.is_edit=!1,this.parent_name="Add Root Menu Path"},NodeClick:function(e){},showAppend:function(e){console.log(e),this.dialogVisible=!0,this.menu=this.origin_menu,this.menu.pid=e.id,this.parent_name="Add submenu to "+e.name},showEdit:function(e){console.log(e),this.dialogVisible=!0,this.menu=e,this.is_edit=!0,this.parent_name="Edit "+e.name,console.log(this.menu)},append:function(e){var t=this;axios.post("/admin/settings/routes",this.menu).then((function(n){0!=n.data.code||200!=n.status?t.$notify({title:"Failed",message:n.data.message,type:"error"}):(t.$notify({title:"Success",message:n.data.message,type:"success"}),t.button_loading=!0,t.is_edit?e.name=t.menu.name:window.location.href=window.location.href,t.button_loading=!1,t.menu=t.origin_menu,t.dialogVisible=!1)}))},remove:function(e,t){var n=this;this.$confirm("Delete this path?","Notice",{confirmButtonText:"Yes",cancelButtonText:"No",type:"warning"}).then((function(){axios.delete("/admin/settings/routes?id="+t.id).then((function(i){if(0!=i.data.code||200!=i.status)n.$notify({title:"Failed",message:i.data.message,type:"error"});else{n.$notify({title:"Success",message:i.data.message,type:"success"});var a=e.parent,o=a.data.submenus||a.data,s=o.findIndex((function(e){return e.id===t.id}));o.splice(s,1)}}))}))}},mounted:function(){var e=this;this.loading=!0,axios.post("/admin/role/get_menu").then((function(t){0!==t.data.code||200!==t.status?e.$notify({title:"Failed",message:t.data.message,type:"error"}):(e.tree=t.data.data,e.loading=!1)}))},data:function(){return{dialogVisible:!1,loading:!1,visible:!1,defaultProps:{children:"submenus",label:"name"},is_edit:!1,button_loading:!1,parent_name:null,menu:{pid:0,name:"",url:"",icon:"",id:0},origin_menu:{pid:0,name:"",url:"",icon:"",id:0},rules:{name:[{required:!0,message:"Required",trigger:"blur"}],url:[{required:!0,message:"Required",trigger:"blur"}]},tree:[]}},props:[]},a=n(0),o=Object(a.a)(i,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[e.dialogVisible?n("el-dialog",{attrs:{title:e.parent_name,"close-on-click-modal":!1,visible:e.dialogVisible,width:"40%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("el-form",{ref:"form",attrs:{model:e.menu,rules:e.rules,size:"small"}},[n("el-form-item",{attrs:{label:"Title",prop:"name"}},[n("el-input",{attrs:{type:"text",placeholder:"menu title"},model:{value:e.menu.name,callback:function(t){e.$set(e.menu,"name",t)},expression:"menu.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"Url",prop:"url"}},[n("el-input",{attrs:{type:"text",placeholder:"menu url"},model:{value:e.menu.url,callback:function(t){e.$set(e.menu,"url",t)},expression:"menu.url"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"Icon"}},[n("el-input",{attrs:{type:"text",placeholder:"el-icon-something"},model:{value:e.menu.icon,callback:function(t){e.$set(e.menu,"icon",t)},expression:"menu.icon"}})],1),e._v(" "),n("el-input",{attrs:{type:"hidden"},model:{value:e.menu.id,callback:function(t){e.$set(e.menu,"id",t)},expression:"menu.id"}})],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("Cancel")]),e._v(" "),n("el-button",{attrs:{type:"primary",loading:e.button_loading},on:{click:function(){return e.append(e.menu)}}},[e._v("Submit")])],1)],1):e._e(),e._v(" "),n("el-card",{attrs:{shadow:"hover"}},[n("div",{attrs:{slot:"header"},slot:"header"},[e._v("\n                Route Menu List\n                "),n("el-button",{staticClass:"pull-right",attrs:{type:"primary",size:"small"},on:{click:function(t){return e.appendRootMenu()}}},[e._v("Add a Root Menu")])],1),e._v(" "),n("el-tree",{ref:"tree",staticClass:"filter-tree",staticStyle:{"font-size":"16px"},attrs:{data:e.tree,props:e.defaultProps,"highlight-current":!0,"expand-on-click-node":!1,"default-expand-all":!0,"node-key":"url"},on:{"node-click":e.NodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.node,a=t.data;return n("span",{staticClass:"custom-tree-node"},[n("span",[n("i",{class:a.icon,staticStyle:{"margin-right":"10px"}}),e._v(e._s(a.name)+"\n                        "),n("a",{attrs:{href:""}},[e._v("( "+e._s(a.url)+" )")])]),e._v(" "),n("span",[n("el-button",{directives:[{name:"show",rawName:"v-show",value:0===a.pid,expression:"data.pid === 0"}],attrs:{type:"text",icon:"el-icon-plus",circle:"",alt:"Add Submenu"},on:{click:function(t){return e.showAppend(a)}}}),e._v(" "),n("el-button",{attrs:{type:"text",icon:"el-icon-edit",circle:"",alt:"Edit Menu"},on:{click:function(t){return e.showEdit(a)}}}),e._v(" "),n("el-button",{attrs:{type:"text",icon:"el-icon-delete",circle:"",alt:"Delete"},on:{click:function(t){return e.remove(i,a)}}})],1)])}}])})],1)],1)}),[],!1,null,null,null);t.default=o.exports}}]);