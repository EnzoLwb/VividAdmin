(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{215:function(e,t,l){"use strict";l.r(t);var i={data:function(){return{article:this.originObj,editorConfig:{filebrowserBrowseUrl:"/ckfinder/browser",filebrowserImageBrowseUrl:"/ckfinder/browser?type=Images",filebrowserFlashBrowseUrl:"/ckfinder/browser?type=Flash",filebrowserUploadUrl:"/ckfinder/connector?command=QuickUpload&type=Files",filebrowserImageUploadUrl:"/ckfinder/connector?command=QuickUpload&type=Images",filebrowserFlashUploadUrl:"/ckfinder/connector?command=QuickUpload&type=Flash",height:425,allowedContent:!0,toolbarCanCollapse:!1,language:"en"},form:{emailName:"",funcCode:"",emailSubject:"",emailFrom:"",emailText:"",fromName:"",Disabled:0,wordCount:0,emailId:"",module:""},rules:{emailName:[{required:!0,message:"Required",trigger:"blur"}],emailSubject:[{required:!0,message:"Required",trigger:"blur"}],fromName:[{required:!0,message:"Required",trigger:"blur"}],emailFrom:[{required:!0,message:"Required",trigger:"blur"}],module:[{required:!0,message:"Required",trigger:"blur"}],funcCode:[{required:!0,message:"Required",trigger:"blur"}]},site:this.editSite,pages:[],loading:!1,pagesLoading:!1}},created:function(){0==Object.keys(this.originObj).length?this.article=this.form:this.article.emailText=decodeURIComponent(this.article.emailText.replace(/\+/g,"%20"))},methods:{countWord:function(){var e=this.article.emailText.trim();this.article.wordCount=e?e.split(" ").length:0},submitForm:function(){var e=this;console.log(this.article),this.$refs.form.validate((function(t){t&&(e.loading=!0,axios.post("/admin/news_letter/save",e.article).then((function(t){0!=t.data.code||200!=t.status?e.$notify({message:t.data.message,type:"error"}):(e.$notify({message:t.data.message,type:"success"}),e.$confirm("Do you want to jump to the list?","Confirm",{confirmButtonText:"Yes",cancelButtonText:"No",type:"warning"}).then((function(){window.location.href="/admin/news_letter"})).catch((function(){window.location.href=window.location.href}))),e.loading=!1})))}))}},props:["originObj","title","editSite"]},a=l(0),r=Object(a.a)(i,(function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[l("el-row",[l("el-col",{attrs:{xs:24,sm:24,md:20,lg:20,xl:20}},[l("el-card",{attrs:{shadow:"hover"}},[l("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[l("span",[e._v(e._s(e.title))])]),e._v(" "),l("el-form",{ref:"form",staticStyle:{width:"80%"},attrs:{model:e.article,rules:e.rules,size:"medium","label-position":"top"}},[l("el-form-item",{attrs:{label:"Templete Name",prop:"emailName"}},[l("el-input",{model:{value:e.article.emailName,callback:function(t){e.$set(e.article,"emailName",t)},expression:"article.emailName"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"Function Code",prop:"funcCode"}},[l("el-input",{model:{value:e.article.funcCode,callback:function(t){e.$set(e.article,"funcCode",t)},expression:"article.funcCode"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"Subject",prop:"emailSubject"}},[l("el-input",{model:{value:e.article.emailSubject,callback:function(t){e.$set(e.article,"emailSubject",t)},expression:"article.emailSubject"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"From Address",prop:"emailFrom"}},[l("el-input",{model:{value:e.article.emailFrom,callback:function(t){e.$set(e.article,"emailFrom",t)},expression:"article.emailFrom"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"From Name",prop:"fromName"}},[l("el-input",{model:{value:e.article.fromName,callback:function(t){e.$set(e.article,"fromName",t)},expression:"article.fromName"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"Deactive"}},[l("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.article.Disabled,callback:function(t){e.$set(e.article,"Disabled",t)},expression:"article.Disabled"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"Module",prop:"module"}},[l("el-select",{model:{value:e.article.module,callback:function(t){e.$set(e.article,"module",t)},expression:"article.module"}},[l("el-option",{attrs:{label:"console",value:"console"}}),e._v(" "),l("el-option",{attrs:{label:"online",value:"online"}}),e._v(" "),l("el-option",{attrs:{label:"hawk",value:"hawk"}})],1)],1),e._v(" "),l("el-form-item",{attrs:{label:"Column description"}},[l("ckeditor",{attrs:{config:e.editorConfig},on:{input:e.countWord},model:{value:e.article.emailText,callback:function(t){e.$set(e.article,"emailText",t)},expression:"article.emailText"}})],1),e._v(" "),l("div",{staticClass:"word-count"},[e._v("WordCount: "),l("b",[e._v(e._s(this.article.wordCount))])]),e._v(" "),l("el-input",{attrs:{type:"hidden"},model:{value:e.article.emailId,callback:function(t){e.$set(e.article,"emailId",t)},expression:"article.emailId"}}),e._v(" "),l("el-form-item",[l("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:function(t){return e.submitForm()}}},[e._v("Submit")])],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null);t.default=r.exports}}]);