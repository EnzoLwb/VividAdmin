(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{215:function(e,t,a){"use strict";a.r(t);var l={data:function(){return{editorConfig:{language:"en"},rules:{emailText:[{required:!0,message:"Required",trigger:"blur"}]},translate:{emailId:this.obj.emailId,wordCount:this.obj.wordCount,emailSubject:this.obj.emailSubject,locale:"",translationId:null,emailText:""},loading:!1}},created:function(){this.obj.emailText=decodeURIComponent(this.obj.emailText.replace(/\+/g,"%20"))},methods:{translateRecord:function(){var e=this;this.loading=!0,axios.post("/admin/translate/record",{model:"NewsLetterTranslation",relate_id:"emailId",id:this.translate.emailId,locale:this.translate.locale}).then((function(t){0!=t.data.code||200!=t.status?e.$notify({message:t.data.message,type:"error"}):t.data.data?(e.translate.translationId=t.data.data.translationId,e.translate.emailText=decodeURIComponent(t.data.data.emailText.replace(/\+/g,"%20"))):(e.$notify({message:"No translation result, default to original content",type:"info"}),e.translate.translationId=null,e.translate.emailText=e.obj.emailText),e.loading=!1}))},submitForm:function(){var e=this;this.$refs.form.validate((function(t){t&&(e.loading=!0,axios.post("/admin/news_letter/translate",e.translate).then((function(t){0!=t.data.code||200!=t.status?e.$notify({message:t.data.message,type:"error"}):(e.$notify({message:t.data.message,type:"success"}),e.$confirm("Do you want to jump to the list?","Confirm",{confirmButtonText:"Yes",cancelButtonText:"No",type:"warning"}).then((function(){window.location.href="/admin/news_letter/"})).catch((function(){window.location.href=window.location.href}))),e.loading=!1})))}))}},props:["obj","languageSelect"]},n=a(0),o=Object(n.a)(l,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("el-row",[a("el-col",{attrs:{xs:24,sm:24,md:20,lg:20,xl:20}},[a("el-card",{attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("Translate")])]),e._v(" "),a("p",{staticClass:"translate_desc"},[e._v("Template Name: "),a("span",[e._v(e._s(e.obj.emailName))])]),e._v(" "),a("p",{staticClass:"translate_desc"},[e._v("Subject："),a("span",[e._v(e._s(e.obj.emailSubject))])]),e._v(" "),a("p",{staticClass:"translate_desc"},[e._v("Function Code："),a("span",[e._v(e._s(e.obj.funcCode))])]),e._v(" "),a("el-form",{ref:"form",attrs:{model:e.translate,rules:e.rules,size:"medium","label-position":"top"}},[a("el-form-item",{attrs:{label:"Column description (English) :"}},[a("ckeditor",{attrs:{config:{language:"en",readOnly:!0},id:"origin"},model:{value:e.obj.emailText,callback:function(t){e.$set(e.obj,"emailText",t)},expression:"obj.emailText"}})],1),e._v(" "),a("div",{staticClass:"word-count"},[e._v("WordCount: "),a("b",[e._v(e._s(this.obj.wordCount))])]),e._v(" "),a("el-form-item",{attrs:{prop:"emailText"}},[a("template",{slot:"label"},[e._v("Translated into :\r\n                        "),a("el-select",{staticStyle:{width:"120px","margin-left":"20px"},attrs:{size:"mini",prop:"locale",rules:{required:!0,message:"Required",trigger:"blur"}},on:{change:e.translateRecord},model:{value:e.translate.locale,callback:function(t){e.$set(e.translate,"locale",t)},expression:"translate.locale"}},e._l(e.languageSelect,(function(e,t){return a("el-option",{key:t,attrs:{label:t,value:e}})})),1)],1),e._v(" "),a("ckeditor",{attrs:{config:e.editorConfig,id:"translate"},model:{value:e.translate.emailText,callback:function(t){e.$set(e.translate,"emailText",t)},expression:"translate.emailText"}})],2),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:function(t){return e.submitForm()}}},[e._v("Submit")])],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null);t.default=o.exports}}]);