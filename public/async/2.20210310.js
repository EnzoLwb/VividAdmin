(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{192:function(e,t,a){"use strict";a.r(t);var l={data:function(){return{loading:!1,is_add:!1,outerVisible:!1,dialog_title:"",articles:{},search_form:{role_id:"",real_name:"",group:"",status:1},tabledata:{}}},mounted:function(){this.getData({})},methods:{handleSizeChange:function(e){this.per_page=e,this.handleCurrentChange(this.tabledata.current_page)},handleCurrentChange:function(e){var t={};Object.assign(t,this.search_form),t.page=e,t.per_page=this.per_page,this.getData(t)},getData:function(e){var t=this;this.loading=!0,axios.post("/admin/user/list",e).then((function(e){0!=e.data.code||200!=e.status?t.$notify({title:"请求失败",message:e.data.message,type:"error"}):t.tabledata=e.data.data,t.loading=!1}))},closeDialog:function(e){this.outerVisible=e,setTimeout((function(){window.location.href="/admin/user/list"}),1500)},showForm:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.outerVisible=!0,"add"!=e?(this.dialog_title="Edit User —— "+t.real_name,this.articles=t,this.is_add=!1):(this.articles={},this.is_add=!0,this.dialog_title="Add User")},reset:function(){this.search_form={role_id:"",real_name:"",status:1},this.getData({})},search:function(){var e={};Object.assign(e,this.search_form),this.getData(e)},handleEdit:function(e){window.location.href="/admin/user/edit?id="+e},handleDelete:function(e,t){var a=this,l=1==t.status?0:1,r=1==l?"Enable the user":"Disable the user";this.$confirm(r+", Do you want to continue?","Confirm",{confirmButtonText:"Yes",cancelButtonText:"No",type:"warning"}).then((function(){a.loading=!0,axios.post("/admin/user/delete",{id:t.id,updateStatus:l}).then((function(t){0!=t.data.code||200!=t.status?a.$notify({title:"Failed",message:t.data.message,type:"error"}):(a.$notify({title:"Success",message:t.data.message,type:"success"}),a.tabledata.data[e].status=l),a.loading=!1}))}))}},props:["roles"]},r=a(0),s=Object(r.a)(l,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",{attrs:{shadow:"hover"}},[a("el-form",{staticClass:"search-form-inline",attrs:{inline:!0,size:"mini"}},[a("el-form-item",{attrs:{label:"Role:"}},[a("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"Select",clearable:""},model:{value:e.search_form.role_id,callback:function(t){e.$set(e.search_form,"role_id",t)},expression:"search_form.role_id"}},e._l(e.roles,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"Post:"}},[a("el-select",{staticStyle:{width:"150px"},attrs:{size:"mini"},model:{value:e.search_form.group,callback:function(t){e.$set(e.search_form,"group",t)},expression:"search_form.group"}},[a("el-option",{attrs:{label:"Admin",value:1}}),e._v(" "),a("el-option",{attrs:{label:"Marketing Manager",value:2}}),e._v(" "),a("el-option",{attrs:{label:"Translator",value:3}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"State:"}},[a("el-radio-group",{model:{value:e.search_form.status,callback:function(t){e.$set(e.search_form,"status",t)},expression:"search_form.status"}},[a("el-radio-button",{attrs:{label:"1"}},[e._v("Enable")]),e._v(" "),a("el-radio-button",{attrs:{label:"0"}},[e._v("Disable")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"NickName:"}},[a("el-input",{attrs:{type:"text"},model:{value:e.search_form.real_name,callback:function(t){e.$set(e.search_form,"real_name",t)},expression:"search_form.real_name"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"warning"},on:{click:e.search}},[e._v("Search")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"info"},on:{click:e.reset}},[e._v("Reset")])],1)],1)],1),e._v(" "),a("el-card",{staticClass:"margin_top",attrs:{shadow:"hover"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("el-button",{attrs:{icon:"el-icon-user",type:"primary",size:"mini"},on:{click:function(t){return e.showForm("add")}}},[e._v("Add User")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.tabledata.data,size:"medium"}},[a("el-table-column",{attrs:{resizable:"",prop:"id",label:"ID",width:"70"}}),e._v(" "),a("el-table-column",{attrs:{resizable:"",prop:"username",label:"UserName"}}),e._v(" "),a("el-table-column",{attrs:{resizable:"",prop:"real_name",label:"NickName"}}),e._v(" "),a("el-table-column",{attrs:{resizable:"",prop:"name",label:"Role"}}),e._v(" "),a("el-table-column",{attrs:{resizable:"",label:"Post"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.group?a("span",[e._v("Admin")]):2==t.row.group?a("span",[e._v("Marketing Manager")]):3==t.row.group?a("span",[e._v("Translator")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{resizable:"",prop:"login_at",label:"Login Time"}}),e._v(" "),a("el-table-column",{attrs:{resizable:"",label:"State"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(1==t.row.status?"Enable":"Disable")+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{resizable:"",align:"center",label:"Operation"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.showForm("edit",t.row)}}},[e._v("Edit")]),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v(e._s(1==t.row.status?"Disable":"Enable"))])]}}])})],1),e._v(" "),a("div",{staticClass:"pull-right"},[a("el-pagination",{staticStyle:{margin:"15px 0"},attrs:{"current-page":e.tabledata.current_page,total:e.tabledata.total,"page-sizes":this.unils.page_size,"page-size":parseInt(e.tabledata.per_page),layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.tabledata,"current_page",t)},"update:current-page":function(t){return e.$set(e.tabledata,"current_page",t)}}})],1)],1),e._v(" "),e.outerVisible?a("el-dialog",{attrs:{visible:e.outerVisible,"close-on-click-modal":!1,title:e.dialog_title},on:{"update:visible":function(t){e.outerVisible=t}}},[a("el-row",{staticStyle:{"margin-top":"15px"}},[a("el-col",{attrs:{span:20}},[a("admin-form",{attrs:{articles:e.articles,is_add:e.is_add,roles:e.roles},on:{closeDialog:e.closeDialog}})],1)],1)],1):e._e()],1)}),[],!1,null,null,null);t.default=s.exports}}]);