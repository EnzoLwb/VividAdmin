(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{218:function(e,t,a){"use strict";a.r(t);var i={data:function(){var e=this;return{article:this.originObj,form:{word:"",word_id:"",page_ids:[]},rules:{word:[{required:!0,message:"Required",trigger:"blur"},{validator:function(t,a,i){""===a&&i(new Error("Required")),axios.post("/admin/repeat_word",{model:"DbTerm",key:"word",value:e.article.word,current_id:e.article.word_id,primary_key:"word_id"}).then((function(t){0!=t.data.code||200!=t.status?e.$notify({title:"Request Failed",message:t.data.message,type:"error"}):(t.data.data.exist&&i(new Error("This word already exists, please do not add it repeatedly")),i())}))},trigger:"blur"}],page_ids:[{required:!0,message:"Required",trigger:"blur"}]},site:this.editSite,pages:[],loading:!1,pagesLoading:!1}},created:function(){var e=this;if(0==Object.keys(this.originObj).length)this.article=this.form;else{this.originObj.page_id;this.pagesLoading=!0,axios.post("/admin/pages_by_site",{site:this.site}).then((function(t){0!=t.data.code||200!=t.status?e.$notify({title:"Request Failed",message:t.data.message,type:"error"}):e.pages=t.data.data,e.pagesLoading=!1}))}},methods:{getPages:function(){var e=this;this.pagesLoading=!0,this.article.page_ids=[],axios.post("/admin/pages_by_site",{site:this.site}).then((function(t){0!=t.data.code||200!=t.status?e.$notify({title:"Request Failed",message:t.data.message,type:"error"}):e.pages=t.data.data,e.pagesLoading=!1}))},submitForm:function(){var e=this;this.$refs.form.validate((function(t){t&&(e.loading=!0,axios.post("/admin/db_terms/save",e.article).then((function(t){0!=t.data.code||200!=t.status?e.$notify({message:t.data.message,type:"error"}):(e.$notify({message:t.data.message,type:"success"}),e.$confirm("Do you want to jump to the list?","Confirm",{confirmButtonText:"Yes",cancelButtonText:"No",type:"warning"}).then((function(){window.location.href="/admin/db_terms"})).catch((function(){window.location.href=window.location.href}))),e.loading=!1})))}))}},props:["originObj","title","editSite"]},s=a(0),r=Object(s.a)(i,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("el-row",[a("el-col",{attrs:{xs:24,sm:24,md:20,lg:13,xl:13}},[a("el-card",{attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v(e._s(e.title))])]),e._v(" "),a("el-form",{ref:"form",staticStyle:{width:"80%"},attrs:{model:e.article,rules:e.rules,size:"small","label-position":"top"}},[a("el-form-item",{attrs:{label:"Word",prop:"word"}},[a("el-input",{model:{value:e.article.word,callback:function(t){e.$set(e.article,"word",t)},expression:"article.word"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"Site"}},[a("el-select",{on:{change:e.getPages},model:{value:e.site,callback:function(t){e.site=t},expression:"site"}},[a("el-option",{attrs:{label:"Service",value:"Service"}}),e._v(" "),a("el-option",{attrs:{label:"Media",value:"Media"}})],1)],1),e._v(" "),a("el-form-item",{directives:[{name:"loading",rawName:"v-loading",value:e.pagesLoading,expression:"pagesLoading"}],attrs:{label:"Web page name",prop:"page_ids"}},[a("el-select",{staticStyle:{"min-width":"350px"},attrs:{multiple:"","collapse-tags":""},model:{value:e.article.page_ids,callback:function(t){e.$set(e.article,"page_ids",t)},expression:"article.page_ids"}},e._l(e.pages,(function(e){return a("el-option",{key:e.page_id,attrs:{label:e.name+"   ("+e.url+")",value:e.page_id}})})),1)],1),e._v(" "),a("el-input",{attrs:{type:"hidden"},model:{value:e.article.word_id,callback:function(t){e.$set(e.article,"word_id",t)},expression:"article.word_id"}}),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:function(t){return e.submitForm()}}},[e._v("Submit")])],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null);t.default=r.exports}}]);