(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{198:function(e,t,i){"use strict";i.r(t);var l={data:function(){return{article:this.originObj,form:{website:"",module_id:"",name:"",url:"",note:"",page_id:"",screenshots:[]},rules:{name:[{required:!0,message:"Required",trigger:"blur"}],website:[{required:!0,message:"Required",trigger:"blur"}],module_id:[{required:!0,message:"Required",trigger:"blur"}],note:[{required:!0,message:"Required",trigger:"blur"}],screenshots:[{required:!0,message:"Required",trigger:"blur"}],url:[{required:!0,message:"Required",trigger:"blur"}]},dialogImageUrl:"",dialogVisible:!1,loading:!1}},created:function(){0==Object.keys(this.originObj).length&&(this.article=this.form)},methods:{handleRemove:function(e,t){this.article.screenshots=t},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},successUpload:function(e){this.loading=!1,this.article.screenshots.push(e.data)},submitForm:function(){var e=this;this.$refs.form.validate((function(t){t&&(e.loading=!0,axios.post("/admin/page_list/save",e.article).then((function(t){0!=t.data.code||200!=t.status?e.$notify({message:t.data.message,type:"error"}):(e.$notify({message:t.data.message,type:"success"}),e.$confirm("Do you want to jump to the list?","Confirm",{confirmButtonText:"Yes",cancelButtonText:"No",type:"warning"}).then((function(){window.location.href="/admin/page_list"})).catch((function(){window.location.href=window.location.href}))),e.loading=!1})))}))}},props:["moduleSelect","originObj","title"]},a=i(0),r=Object(a.a)(l,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[i("el-row",[i("el-col",{attrs:{xs:24,sm:24,md:20,lg:16,xl:16}},[i("el-card",{attrs:{shadow:"hover"}},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("span",[e._v(e._s(e.title))])]),e._v(" "),i("el-form",{ref:"form",staticStyle:{width:"80%"},attrs:{model:e.article,rules:e.rules,size:"medium","label-position":"top"}},[i("el-form-item",{attrs:{label:"Page Name",prop:"name"}},[i("el-input",{model:{value:e.article.name,callback:function(t){e.$set(e.article,"name",t)},expression:"article.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"Page URL",prop:"url"}},[i("el-input",{model:{value:e.article.url,callback:function(t){e.$set(e.article,"url",t)},expression:"article.url"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"Site",prop:"website"}},[i("el-select",{model:{value:e.article.website,callback:function(t){e.$set(e.article,"website",t)},expression:"article.website"}},[i("el-option",{attrs:{label:"Service",value:"Service"}}),e._v(" "),i("el-option",{attrs:{label:"Media",value:"Media"}})],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"Site Module",prop:"module_id"}},[i("el-select",{staticStyle:{width:"150px"},attrs:{clearable:""},model:{value:e.article.module_id,callback:function(t){e.$set(e.article,"module_id",t)},expression:"article.module_id"}},e._l(e.moduleSelect,(function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),e._v(" "),i("el-form-item",{attrs:{label:"Note",prop:"note"}},[i("el-input",{attrs:{type:"textarea"},model:{value:e.article.note,callback:function(t){e.$set(e.article,"note",t)},expression:"article.note"}})],1),e._v(" "),i("el-form-item",{attrs:{prop:"screenshots"}},[i("template",{slot:"label"},[e._v("\r\n                        Page ScreenShots\r\n                        "),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"More than 1 screenshot can be added to display various page status",placement:"top-start"}},[i("i",{staticClass:"el-icon-question"})])],1),e._v(" "),i("el-upload",{attrs:{action:this.unils.upload_img_path,"on-success":e.successUpload,"before-upload":this.unils.beforeUploadImg,"list-type":"picture-card","on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove,"file-list":e.article.screenshots}},[i("i",{staticClass:"el-icon-plus"})])],2),e._v(" "),i("el-input",{attrs:{type:"hidden"},model:{value:e.article.page_id,callback:function(t){e.$set(e.article,"page_id",t)},expression:"article.page_id"}}),e._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:function(t){return e.submitForm()}}},[e._v("Submit")])],1)],1)],1)],1)],1),e._v(" "),i("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)}),[],!1,null,null,null);t.default=r.exports}}]);